define(["@grafana/data","@grafana/runtime","lodash","rxjs","react","@grafana/ui"],((e,t,r,n,o,i)=>(()=>{"use strict";var a={305:t=>{t.exports=e},545:e=>{e.exports=t},388:e=>{e.exports=i},980:e=>{e.exports=r},650:e=>{e.exports=o},177:e=>{e.exports=n}},u={};function c(e){var t=u[e];if(void 0!==t)return t.exports;var r=u[e]={exports:{}};return a[e](r,r.exports,c),r.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{c.r(s),c.d(s,{plugin:()=>le});var e=c(305),t=c(545),r=c(980),n=c(177);function o(e){return"function"==typeof e}function i(e){return function(t){if(function(e){return o(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},a(e,t)};function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function l(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function d(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function y(e){return this instanceof y?(this.v=e,this):new y(e)}Object.create,Object.create;var h,b=((h=function(e){var t;t=this,Error.call(t),t.stack=(new Error).stack,this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}).prototype=Object.create(Error.prototype),h.prototype.constructor=h,h);function v(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var m=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,r,n,i;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var u=f(a),c=u.next();!c.done;c=u.next())c.value.remove(this)}catch(t){e={error:t}}finally{try{c&&!c.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}else a.remove(this);var s=this.initialTeardown;if(o(s))try{s()}catch(e){i=e instanceof b?e.errors:[e]}var l=this._finalizers;if(l){this._finalizers=null;try{for(var y=f(l),h=y.next();!h.done;h=y.next()){var v=h.value;try{w(v)}catch(e){i=null!=i?i:[],e instanceof b?i=d(d([],p(i)),p(e.errors)):i.push(e)}}}catch(e){r={error:e}}finally{try{h&&!h.done&&(n=y.return)&&n.call(y)}finally{if(r)throw r.error}}}if(i)throw new b(i)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)w(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&v(t,e)},e.prototype.remove=function(t){var r=this._finalizers;r&&v(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}();function g(e){return e instanceof m||e&&"closed"in e&&o(e.remove)&&o(e.add)&&o(e.unsubscribe)}function w(e){o(e)?e():e.unsubscribe()}m.EMPTY;var O={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},S={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=S.delegate;return(null==o?void 0:o.setTimeout)?o.setTimeout.apply(o,d([e,t],p(r))):setTimeout.apply(void 0,d([e,t],p(r)))},clearTimeout:function(e){var t=S.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function x(e){S.setTimeout((function(){var t=O.onUnhandledError;if(!t)throw e;t(e)}))}function P(){}var j=E("C",void 0,void 0);function E(e,t,r){return{kind:e,value:t,error:r}}var _=null,D=function(e){function t(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,g(t)&&t.add(r)):r.destination=R,r}return u(t,e),t.create=function(e,t,r){return new C(e,t,r)},t.prototype.next=function(e){this.isStopped?F(function(e){return E("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?F(E("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?F(j,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(m),I=Function.prototype.bind;function k(e,t){return I.call(e,t)}var T=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){A(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){A(e)}else A(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){A(e)}},e}(),C=function(e){function t(t,r,n){var i,a,u=e.call(this)||this;return o(t)||!t?i={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:u&&O.useDeprecatedNextContext?((a=Object.create(t)).unsubscribe=function(){return u.unsubscribe()},i={next:t.next&&k(t.next,a),error:t.error&&k(t.error,a),complete:t.complete&&k(t.complete,a)}):i=t,u.destination=new T(i),u}return u(t,e),t}(D);function A(e){var t;O.useDeprecatedSynchronousErrorHandling?(t=e,O.useDeprecatedSynchronousErrorHandling&&_&&(_.errorThrown=!0,_.error=t)):x(e)}function F(e,t){var r=O.onStoppedNotification;r&&S.setTimeout((function(){return r(e,t)}))}var R={closed:!0,next:P,error:function(e){throw e},complete:P};function q(e,t,r,n,o){return new z(e,t,r,n,o)}var z=function(e){function t(t,r,n,o,i,a){var u=e.call(this,t)||this;return u.onFinalize=i,u.shouldUnsubscribe=a,u._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,u._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,u._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,u}return u(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(D);function J(e,t){return i((function(r,n){var o=0;r.subscribe(q(n,(function(r){n.next(e.call(t,r,o++))})))}))}var $=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e},N="function"==typeof Symbol&&Symbol.observable||"@@observable";function Q(e){return e}var U=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n,i=this,a=(n=e)&&n instanceof D||function(e){return e&&o(e.next)&&o(e.error)&&o(e.complete)}(n)&&g(n)?e:new C(e,t,r);return function(e){if(O.useDeprecatedSynchronousErrorHandling){var t=!_;if(t&&(_={errorThrown:!1,error:null}),e(),t){var r=_,n=r.errorThrown,o=r.error;if(_=null,n)throw o}}else e()}((function(){var e=i,t=e.operator,r=e.source;a.add(t?t.call(a,r):r?i._subscribe(a):i._trySubscribe(a))})),a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=B(t))((function(t,n){var o=new C({next:function(t){try{e(t)}catch(e){n(e),o.unsubscribe()}},error:n,complete:t});r.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[N]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===(r=e).length?Q:1===r.length?r[0]:function(e){return r.reduce((function(e,t){return t(e)}),e)})(this);var r},e.prototype.toPromise=function(e){var t=this;return new(e=B(e))((function(e,r){var n;t.subscribe((function(e){return n=e}),(function(e){return r(e)}),(function(){return e(n)}))}))},e.create=function(t){return new e(t)},e}();function B(e){var t;return null!==(t=null!=e?e:O.Promise)&&void 0!==t?t:Promise}var K="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function L(e){if(e instanceof U)return e;if(null!=e){if(function(e){return o(e[N])}(e))return a=e,new U((function(e){var t=a[N]();if(o(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if($(e))return i=e,new U((function(e){for(var t=0;t<i.length&&!e.closed;t++)e.next(i[t]);e.complete()}));if(o(null==(n=e)?void 0:n.then))return r=e,new U((function(e){r.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,x)}));if(function(e){return Symbol.asyncIterator&&o(null==e?void 0:e[Symbol.asyncIterator])}(e))return M(e);if(function(e){return o(null==e?void 0:e[K])}(e))return t=e,new U((function(e){var r,n;try{for(var o=f(t),i=o.next();!i.done;i=o.next()){var a=i.value;if(e.next(a),e.closed)return}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}e.complete()}));if(function(e){return o(null==e?void 0:e.getReader)}(e))return M(function(e){return function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||u(e,t)}))})}function u(e,t){try{(r=o[e](t)).value instanceof y?Promise.resolve(r.value.v).then(c,s):l(i[0][2],r)}catch(e){l(i[0][3],e)}var r}function c(e){u("next",e)}function s(e){u("throw",e)}function l(e,t){e(t),i.shift(),i.length&&u(i[0][0],i[0][1])}}(this,arguments,(function(){var t,r,n;return l(this,(function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,y(t.read())];case 3:return r=o.sent(),n=r.value,r.done?[4,y(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,y(n)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}(e))}var t,r,n,i,a;throw function(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}(e)}function M(e){return new U((function(t){(function(e,t){var r,n,o,i,a,u,c,s;return a=this,u=void 0,s=function(){var a,u;return l(this,(function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),r=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,o,(t=e[r](t)).done,t.value)}))}}}(e),c.label=1;case 1:return[4,r.next()];case 2:if((n=c.sent()).done)return[3,4];if(a=n.value,t.next(a),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return u=c.sent(),o={error:u},[3,11];case 6:return c.trys.push([6,,9,10]),n&&!n.done&&(i=r.return)?[4,i.call(r)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))},new((c=void 0)||(c=Promise))((function(e,t){function r(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof c?o:new c((function(e){e(o)}))).then(r,n)}o((s=s.apply(a,u||[])).next())}))})(e,t).catch((function(e){return t.error(e)}))}))}function H(e,t,r){return void 0===r&&(r=1/0),o(t)?H((function(r,n){return J((function(e,o){return t(r,e,n,o)}))(L(e(r,n)))}),r):("number"==typeof t&&(r=t),i((function(t,n){return function(e,t,r,n,o,i,a,u){var c=[],s=0,l=0,f=!1,p=function(){!f||c.length||s||t.complete()},d=function(e){return s<n?y(e):c.push(e)},y=function(e){s++;var o=!1;L(r(e,l++)).subscribe(q(t,(function(e){t.next(e)}),(function(){o=!0}),void 0,(function(){if(o)try{s--;for(var e=function(){var e=c.shift();y(e)};c.length&&s<n;)e();p()}catch(e){t.error(e)}})))};return e.subscribe(q(t,d,(function(){f=!0,p()}))),function(){}}(t,n,e,r)})))}function Y(e,t){return i(function(e,t,r,n,o){return function(n,o){var i=r,a=t,u=0;n.subscribe(q(o,(function(t){var r=u++;a=i?e(a,t,r):(i=!0,t)}),(function(){i&&o.next(a),o.complete()})))}}(e,t,arguments.length>=2))}var W=function(e,t){return e.push(t),e};function G(e){return i((function(t,r){var n,o=null,i=!1;o=t.subscribe(q(r,void 0,void 0,(function(a){n=L(e(a,G(e)(t))),o?(o.unsubscribe(),o=null,n.subscribe(r)):i=!0}))),i&&(o.unsubscribe(),o=null,n.subscribe(r))}))}function V(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function X(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Z extends t.DataSourceWithBackend{query(e){const r=e.targets.filter((e=>{var t;return"svtech-anomalydetection-datasource"!==(null===(t=e.target_datasource)||void 0===t?void 0:t.type)&&null!=e.target_datasource}));if(!r.length)return(0,n.of)({data:[]});r.forEach((function(e){delete e.datasource,e.datasource=e.target_datasource}));const o=[];return r.forEach(((r,n)=>{o.push({datasource:(0,t.getDataSourceSrv)().get(r.target_datasource,e.scopedVars),targets:[r]})})),this.batchQueries(o,e)}getBackend(){return this.jsonData.backend}batchQueries(o,a){const u=[];a.targets.forEach((e=>{var t;"svtech-anomalydetection-datasource"===(null===(t=e.datasource)||void 0===t?void 0:t.type)&&u.push({targetRefID:e.series,regex:e.pattern,method:e.method,config:JSON.parse(e.params)})}));const c=o.filter(this.isQueryable).map(((o,c)=>(0,n.from)(o.datasource).pipe(H((s=>{const l=(0,r.cloneDeep)(a);return l.requestId=`mixed-${c}-${l.requestId||""}`,l.targets=o.targets,(0,n.from)(s.query(l)).pipe(J((t=>{return r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){X(e,t,r[t])}))}return e}({},t),n=null!=(n={data:t.data||[],state:e.LoadingState.Loading,key:`mixed-${c}-${t.key||""}`})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})),r;var r,n})),H((e=>{const r=u.find((e=>e.targetRefID===o.targets[0].refId));return void 0!==r?(0,t.getBackendSrv)().post(this.jsonData.backend+"/query",{data:e,regex:r.regex,method:r.method,config:r.config}).then((e=>e)):(0,n.of)(e)})),i((function(e,t){Y(W,[])(e).subscribe(t)})),G((r=>((r=(0,t.toDataQueryError)(r)).message=`${s.name}: ${r.message}`,(0,n.of)([{data:[],state:e.LoadingState.Error,error:r,key:`mixed-${c}-${l.requestId||""}`}])))))})))));return(0,n.forkJoin)(c).pipe(Y(((e,t)=>t.reduce(((e,t)=>(e.push.apply(e,t),e)),e)),[]),J(this.finalizeResponses),(void 0===s&&(s=1/0),H(Q,s)));var s}isQueryable(e){return e&&Array.isArray(e.targets)&&e.targets.length>0}finalizeResponses(t){const{length:r}=t;if(0===r)return t;const n=t.find((t=>t.state===e.LoadingState.Error));return n?t.push(n):t[r-1].state=e.LoadingState.Done,t}testDatasource(){return(e=function*(){return{status:"success",message:"Success"}},function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){V(i,n,o,a,u,"next",e)}function u(e){V(i,n,o,a,u,"throw",e)}a(void 0)}))})();var e}constructor(e){super(e),this.jsonData=e.jsonData}}var ee=c(650),te=c.n(ee),re=c(388);function ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ne(e,t,r[t])}))}return e}function ie(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function ae(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ue(e,t,r[t])}))}return e}function se(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const le=new e.DataSourcePlugin(Z).setConfigEditor((function(e){const{onOptionsChange:t,options:r}=e,{jsonData:n,secureJsonFields:o}=r,i=r.secureJsonData||{};return te().createElement("div",{className:"gf-form-group"},te().createElement(re.InlineField,{label:"Backend Path",labelWidth:12},te().createElement(re.Input,{onChange:e=>{const n=ie(oe({},r.jsonData),{backend:e.target.value});t(ie(oe({},r),{jsonData:n}))},value:n.backend||"",placeholder:"REST api to generate alarm",width:40})),te().createElement(re.InlineField,{label:"API Key",labelWidth:12},te().createElement(re.SecretInput,{isConfigured:o&&o.apiKey,value:i.apiKey||"",placeholder:"secure json field (backend only)",width:40,onReset:()=>{t(ie(oe({},r),{secureJsonFields:ie(oe({},r.secureJsonFields),{apiKey:!1}),secureJsonData:ie(oe({},r.secureJsonData),{apiKey:""})}))},onChange:e=>{t(ie(oe({},r),{secureJsonData:{apiKey:e.target.value}}))}})))})).setQueryEditor((function(e,r){const[n,o]=(0,ee.useState)([]);(0,ee.useEffect)((()=>{const t=e.datasource.getBackend()+"/list",r=(n=function*(){try{const e=yield fetch(t),r=yield e.json();o(r)}catch(e){console.log("error",e)}},i=function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function a(e){ae(i,r,o,a,u,"next",e)}function u(e){ae(i,r,o,a,u,"throw",e)}a(void 0)}))},function(){return i.apply(this,arguments)});var n,i;r()}),[e.datasource]);const{datasource:i,params:a,series:u,pattern:c}=e.query;return te().createElement("div",null,te().createElement(re.InlineFieldRow,null,te().createElement(re.InlineField,null,te().createElement(t.DataSourcePicker,{placeholder:"Select a data source",onChange:t=>{(t=>{const{onChange:r,query:n}=e;r(se(ce({},n),{datasource:t,target_datasource:t}))})({type:t.type,uid:t.uid})},noDefault:!0,current:"-- Mixed --"!==(null==i?void 0:i.uid)?i:void 0})),te().createElement(re.InlineField,{label:"Algorithm"},te().createElement(re.Cascader,{options:n,onSelect:t=>{const{onChange:r,query:n}=e;r(se(ce({},n),{method:t}))}})),te().createElement(re.InlineField,{label:"RefID"},te().createElement(re.Input,{onChange:t=>{const{onChange:r,query:n}=e;r(se(ce({},n),{series:t.target.value}))},value:u||""})),te().createElement(re.InlineField,{label:"Regex"},te().createElement(re.Input,{onChange:t=>{const{onChange:r,query:n}=e;r(se(ce({},n),{pattern:t.target.value}))},value:c||""}))),te().createElement(re.InlineFieldRow,null,te().createElement(re.InlineField,null,te().createElement(re.Field,{label:"Params",description:"Params to tuning algorithm"},te().createElement(re.TextArea,{value:a||"",onChange:t=>{const{onChange:r,query:n}=e;r(se(ce({},n),{params:t.target.value}))},label:"Param"})))),te().createElement(re.Button,{icon:"sync",onClick:()=>{e.onRunQuery()}},"Run query"))}))})(),s})()));
//# sourceMappingURL=module.js.map